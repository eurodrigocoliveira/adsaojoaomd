<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Escala de Liturgia | Igreja</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="hero">
    <div class="hero__content">
      <p class="eyebrow">Planejamento do culto</p>
      <h1>Escala de Liturgia</h1>
      <p class="lede">
        Centralize equipes, hor√°rios e responsabilidades em um s√≥ lugar.
        Edite, replique e compartilhe a ordem do culto com a igreja.
      </p>
      <div class="hero__badges">
        <span class="badge" id="badge-date">üìÖ 14/12/2025</span>
        <span class="badge" id="badge-time">üï∞Ô∏è 18:00</span>
        <span class="badge badge--soft" id="badge-type">Pr√≥ximo culto celebra√ß√£o</span>
      </div>
    </div>
    <div class="hero__panel">
      <div class="panel__title">Resumo r√°pido</div>
      <ul class="panel__list">
        <li><strong>Conjunto:</strong> <span id="resumo-conjunto">Abra√£o e Banda</span></li>
        <li><strong>M√≠dia:</strong> <span id="resumo-midia">Stories ‚Äî Tha√≠s</span></li>
        <li><strong>Recep√ß√£o:</strong> <span id="resumo-recepcao">Jairo ‚ú® Mara</span></li>
        <li><strong>Pastor:</strong> <span id="resumo-pastor">Pr. Rodrigo</span></li>
        <li><strong>Palavra:</strong> <span id="resumo-palavra">Pb. Evandro</span></li>
      </ul>
      <button id="copy-escala-top" class="ghost-button">Copiar escala completa</button>
    </div>
  </header>

  <main class="container">
    <section class="section form-section">
      <div>
        <p class="eyebrow">Configurar culto</p>
        <h2>Editar informa√ß√µes do culto</h2>
        <p class="section__subtitle">Atualize data, hora e respons√°veis para reutilizar a escala.</p>
      </div>
      <form id="culto-form" class="card form-card">
        <div class="form-grid">
          <label>
            Data
            <input type="date" id="campo-data" required>
          </label>
          <label>
            Hor√°rio
            <input type="time" id="campo-hora" required>
          </label>
          <label>
            Local
            <input type="text" id="campo-local" placeholder="Templo Central" required>
          </label>
          <label>
            Tipo de culto
            <input type="text" id="campo-tipo" placeholder="Culto celebra√ß√£o">
          </label>
          <label>
            Conjunto / Louvor
            <input type="text" id="campo-conjunto" placeholder="Equipe de louvor" required>
          </label>
          <label>
            M√≠dia
            <input type="text" id="campo-midia" placeholder="Stories ‚Äî Nome">
          </label>
          <label>
            Recep√ß√£o
            <input type="text" id="campo-recepcao" placeholder="Respons√°veis pela recep√ß√£o">
          </label>
          <label>
            Pastor respons√°vel
            <input type="text" id="campo-pastor" placeholder="Pr. Fulano">
          </label>
          <label>
            Mensagem / Palavra
            <input type="text" id="campo-palavra" placeholder="Pb. Fulano">
          </label>
        </div>
        <div class="form__actions">
          <div class="pill-note">As altera√ß√µes atualizam cart√µes, resumo e texto copiado.</div>
          <button type="submit" class="primary-button">Aplicar mudan√ßas</button>
        </div>
      </form>
    </section>

    <section class="cards-grid" aria-label="Informa√ß√µes principais">
      <article class="card highlight">
        <div class="card__eyebrow">Data</div>
        <h3 id="card-data">14 de dezembro de 2025</h3>
        <p id="card-tipo">Domingo √† noite ‚Äî Culto de celebra√ß√£o.</p>
      </article>
      <article class="card">
        <div class="card__eyebrow">Hor√°rio</div>
        <h3 id="card-horario">18:00 ¬∑ Prepara√ß√£o</h3>
        <p id="card-horario-extra">In√≠cio oficial do louvor √†s 18:30.</p>
      </article>
      <article class="card">
        <div class="card__eyebrow">Local</div>
        <h3 id="card-local">Templo Central</h3>
        <p>Organize chegada das equipes at√© 30 minutos antes.</p>
      </article>
    </section>

    <section aria-labelledby="equipes-title" class="section">
      <div class="section__header">
        <div>
          <p class="eyebrow">Escala do culto</p>
          <h2 id="equipes-title">Equipes confirmadas</h2>
          <p class="section__subtitle">Fun√ß√µes, respons√°veis e observa√ß√µes r√°pidas.</p>
        </div>
      </div>
      <div class="cards-grid" id="teams"></div>
    </section>

    <section aria-labelledby="ordem-title" class="section">
      <div class="section__header">
        <div>
          <p class="eyebrow">Fluxo do culto</p>
          <h2 id="ordem-title">Ordem do culto</h2>
          <p class="section__subtitle">Itens confirmados com hor√°rios e respons√°veis.</p>
        </div>
        <div class="section__actions">
          <button id="copy-escala" class="ghost-button">Copiar como texto</button>
        </div>
      </div>
      <ol class="timeline" id="timeline" aria-label="Linha do tempo da liturgia"></ol>
    </section>

    <section aria-labelledby="novo-item-title" class="section form-section">
      <div>
        <p class="eyebrow">Criar ou ajustar</p>
        <h2 id="novo-item-title">Adicionar item √† liturgia</h2>
        <p class="section__subtitle">Monte vers√µes alternativas, insira convidados e reorganize a ordem.</p>
      </div>
      <form id="item-form" class="card form-card">
        <div class="form-grid">
          <label>
            Hor√°rio
            <input type="time" id="field-horario" required>
          </label>
          <label>
            T√≠tulo do momento
            <input type="text" id="field-titulo" placeholder="Ex.: Louvor, Palavra Introdut√≥ria" required>
          </label>
          <label>
            Respons√°vel
            <input type="text" id="field-responsavel" placeholder="Quem lidera">
          </label>
          <label>
            Detalhes
            <textarea id="field-detalhes" rows="2" placeholder="Orar pelas fam√≠lias, 2 c√¢nticos..."></textarea>
          </label>
        </div>
        <div class="form__actions">
          <div class="pill-note">Os itens novos aparecem em destaque para f√°cil revis√£o.</div>
          <button type="submit" class="primary-button">Adicionar √† ordem</button>
        </div>
      </form>
    </section>

    <section aria-labelledby="observacoes-title" class="section section--two-columns">
      <div>
        <p class="eyebrow">Checklist</p>
        <h2 id="observacoes-title">Prepara√ß√£o e lembretes</h2>
        <ul class="checklist">
          <li>Confirmar passagem de som do Conjunto at√© 17:40.</li>
          <li>Publicar Stories com chamada √†s 16:30 (Tha√≠s).</li>
          <li>Equipe de recep√ß√£o posicionada 30 minutos antes.</li>
          <li>Material das crian√ßas preparado e identificado.</li>
          <li>Microfones higienizados para preletores.</li>
        </ul>
      </div>
      <div>
        <p class="eyebrow">Observa√ß√µes gerais</p>
        <div class="card notes">
          <p>Espa√ßo para refor√ßar comunicados, pedidos de ora√ß√£o ou mudan√ßas de √∫ltima hora.</p>
          <ul>
            <li>Momento de confraterniza√ß√£o guiado pelo Pr. Rodrigo ap√≥s apresenta√ß√£o dos visitantes.</li>
            <li>Louvor especial com Rosilene ‚Äî confirmar playback.</li>
            <li>Recolher d√≠zimos/ofertas: Jairo ‚ú® Mara.</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Escala pronta para servir ‚Äî compartilhe com a equipe.</p>
  </footer>

  <script>
    const cultoInfo = {
      data: "2025-12-14",
      hora: "18:00",
      local: "Templo Central",
      tipo: "Culto celebra√ß√£o",
      conjunto: "Abra√£o e Banda",
      midia: "Stories ‚Äî Tha√≠s",
      recepcao: "Jairo ‚ú® Mara",
      pastor: "Pr. Rodrigo",
      palavra: "Pb. Evandro",
    };

    const equipes = [
      { key: "conjunto", titulo: "Conjunto", detalhes: "Medley com dois louvores iniciais.", cor: "accent" },
      { key: "midia", titulo: "M√≠dia", detalhes: "Entradas ao vivo e story de chamada √†s 16:30.", cor: "neutral" },
      { key: "recepcao", titulo: "Recep√ß√£o", detalhes: "Recolher ofertas e acolhida dos visitantes.", cor: "neutral" },
      { titulo: "Auxiliar", responsavel: "Gian", detalhes: "Palavra introdut√≥ria e ora√ß√£o de transi√ß√£o.", cor: "accent" },
      { key: "palavra", titulo: "Ministra√ß√£o da Palavra", detalhes: "Com ora√ß√£o de cobertura do Pb. Vanderlei.", cor: "highlight" },
      { key: "pastor", titulo: "Pastor Respons√°vel", detalhes: "Apresenta√ß√£o de visitantes e encerramento.", cor: "highlight" },
    ];

    const ordemInicial = [
      { horario: "18:00", titulo: "Ora√ß√£o", responsavel: "Equipe de Intercess√£o" },
      { horario: "18:30", titulo: "Louvor - Medley (2 louvores)", responsavel: "Conjunto" },
      { horario: "18:40", titulo: "Palavra Introdut√≥ria e Ora√ß√£o", responsavel: "Aux. Gian" },
      { horario: "18:50", titulo: "Louvor congregacional", responsavel: "Conjunto" },
      { horario: "19:00", titulo: "Apresenta√ß√£o de Visitantes e Confraterniza√ß√£o", responsavel: "Pr. Rodrigo" },
      { horario: "19:10", titulo: "Louvor de Confraterniza√ß√£o", responsavel: "Conjunto" },
      { horario: "19:20", titulo: "Ora√ß√£o D√≠zimos/Ofertas", responsavel: "Dc. Erasmo" },
      { horario: "19:30", titulo: "Louvor Especial", responsavel: "Rosilene" },
      { horario: "19:40", titulo: "Recolher D√≠zimos/Ofertas", responsavel: "Jairo ‚ú® Mara" },
      { horario: "19:45", titulo: "Ora√ß√£o Palavra e crian√ßas", responsavel: "Pb. Vanderlei" },
      { horario: "19:50", titulo: "Palavra", responsavel: "Pb. Evandro" },
      { horario: "20:30", titulo: "Encerramento e b√™n√ß√£o final", responsavel: "Pr. Rodrigo" },
    ];

    const timelineEl = document.getElementById("timeline");
    const teamsEl = document.getElementById("teams");

    const badgeDate = document.getElementById("badge-date");
    const badgeTime = document.getElementById("badge-time");
    const badgeType = document.getElementById("badge-type");
    const resumoConjunto = document.getElementById("resumo-conjunto");
    const resumoMidia = document.getElementById("resumo-midia");
    const resumoRecepcao = document.getElementById("resumo-recepcao");
    const resumoPastor = document.getElementById("resumo-pastor");
    const resumoPalavra = document.getElementById("resumo-palavra");
    const cardData = document.getElementById("card-data");
    const cardTipo = document.getElementById("card-tipo");
    const cardHorario = document.getElementById("card-horario");
    const cardHorarioExtra = document.getElementById("card-horario-extra");
    const cardLocal = document.getElementById("card-local");

    const formData = document.getElementById("campo-data");
    const formHora = document.getElementById("campo-hora");
    const formLocal = document.getElementById("campo-local");
    const formTipo = document.getElementById("campo-tipo");
    const formConjunto = document.getElementById("campo-conjunto");
    const formMidia = document.getElementById("campo-midia");
    const formRecepcao = document.getElementById("campo-recepcao");
    const formPastor = document.getElementById("campo-pastor");
    const formPalavra = document.getElementById("campo-palavra");

    function formatDateLong(isoDate) {
      const data = new Date(isoDate + "T00:00:00");
      return data.toLocaleDateString("pt-BR", { day: "2-digit", month: "long", year: "numeric" });
    }

    function formatDateShort(isoDate) {
      const data = new Date(isoDate + "T00:00:00");
      return data.toLocaleDateString("pt-BR");
    }

    function renderHeaderInfo() {
      badgeDate.textContent = `üìÖ ${formatDateShort(cultoInfo.data)}`;
      badgeTime.textContent = `üï∞Ô∏è ${cultoInfo.hora}`;
      badgeType.textContent = cultoInfo.tipo ? `Pr√≥ximo ${cultoInfo.tipo}` : "Pr√≥ximo culto";

      resumoConjunto.textContent = cultoInfo.conjunto;
      resumoMidia.textContent = cultoInfo.midia;
      resumoRecepcao.textContent = cultoInfo.recepcao;
      resumoPastor.textContent = cultoInfo.pastor;
      resumoPalavra.textContent = cultoInfo.palavra;

      cardData.textContent = formatDateLong(cultoInfo.data);
      cardTipo.textContent = `${cultoInfo.tipo || "Culto"} ‚Äî configure detalhes da liturgia.`;
      cardHorario.textContent = `${cultoInfo.hora} ¬∑ Prepara√ß√£o`;
      cardHorarioExtra.textContent = "In√≠cio oficial do louvor 30 minutos depois do hor√°rio base.";
      cardLocal.textContent = cultoInfo.local;

      formData.value = cultoInfo.data;
      formHora.value = cultoInfo.hora;
      formLocal.value = cultoInfo.local;
      formTipo.value = cultoInfo.tipo;
      formConjunto.value = cultoInfo.conjunto;
      formMidia.value = cultoInfo.midia;
      formRecepcao.value = cultoInfo.recepcao;
      formPastor.value = cultoInfo.pastor;
      formPalavra.value = cultoInfo.palavra;
    }

    function equipeComResponsavel(item) {
      if (!item.key) return item;
      return { ...item, responsavel: cultoInfo[item.key] };
    }

    function renderTeams() {
      teamsEl.innerHTML = equipes.map(equipeComResponsavel).map(team => `
        <article class="card card--team card--${team.cor}">
          <div class="card__header">
            <span class="pill">${team.titulo}</span>
            <span class="emoji">üë•</span>
          </div>
          <h3>${team.responsavel || "A definir"}</h3>
          <p>${team.detalhes}</p>
        </article>
      `).join("");
    }

    function renderTimeline(lista) {
      timelineEl.innerHTML = lista.map(item => `
        <li class="timeline__item ${item.novo ? "timeline__item--new" : ""}">
          <div class="timeline__time">${item.horario}</div>
          <div class="timeline__content">
            <div class="timeline__title">${item.titulo}</div>
            ${item.responsavel ? `<p class="timeline__meta">${item.responsavel}</p>` : ""}
            ${item.detalhes ? `<p class="timeline__details">${item.detalhes}</p>` : ""}
          </div>
        </li>
      `).join("");
    }

    function copyEscala() {
      const linhas = ordem.map(item => {
        const partes = [`${item.horario} ‚Äî ${item.titulo}`];
        if (item.responsavel) partes.push(`(${item.responsavel})`);
        if (item.detalhes) partes.push(`- ${item.detalhes}`);
        return partes.join(" ");
      }).join("\n");

      const titulo = `Escala ${formatDateShort(cultoInfo.data)} - ${cultoInfo.hora}`;

      navigator.clipboard.writeText(`${titulo}\n${linhas}`)
        .then(() => {
          alert("Escala copiada! Cole no WhatsApp ou e-mail da equipe.");
        })
        .catch(() => {
          alert("N√£o foi poss√≠vel copiar automaticamente. Selecione manualmente.");
        });
    }

    const ordem = [...ordemInicial];
    renderHeaderInfo();
    renderTeams();
    renderTimeline(ordem);

    document.getElementById("copy-escala").addEventListener("click", copyEscala);
    document.getElementById("copy-escala-top").addEventListener("click", copyEscala);

    document.getElementById("item-form").addEventListener("submit", (event) => {
      event.preventDefault();
      const horario = document.getElementById("field-horario").value;
      const titulo = document.getElementById("field-titulo").value;
      const responsavel = document.getElementById("field-responsavel").value;
      const detalhes = document.getElementById("field-detalhes").value;

      if (!horario || !titulo) return;

      const novoItem = { horario, titulo, responsavel, detalhes, novo: true };
      ordem.push(novoItem);
      ordem.sort((a, b) => a.horario.localeCompare(b.horario));
      renderTimeline(ordem);
      event.target.reset();
    });

    document.getElementById("culto-form").addEventListener("submit", (event) => {
      event.preventDefault();
      cultoInfo.data = formData.value || cultoInfo.data;
      cultoInfo.hora = formHora.value || cultoInfo.hora;
      cultoInfo.local = formLocal.value || cultoInfo.local;
      cultoInfo.tipo = formTipo.value || cultoInfo.tipo;
      cultoInfo.conjunto = formConjunto.value || cultoInfo.conjunto;
      cultoInfo.midia = formMidia.value || cultoInfo.midia;
      cultoInfo.recepcao = formRecepcao.value || cultoInfo.recepcao;
      cultoInfo.pastor = formPastor.value || cultoInfo.pastor;
      cultoInfo.palavra = formPalavra.value || cultoInfo.palavra;

      renderHeaderInfo();
      renderTeams();
      alert("Dados do culto atualizados!");
    });
  </script>
</body>
</html>
